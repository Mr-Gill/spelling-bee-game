<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Spelling Bee Championship</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Volume2, Users, BookOpen, Globe, Layers, RotateCcw, Play, Pause } = lucideReact;

        const SpellingBeeGame = () => {
          // Word database organized by difficulty
          const wordDatabase = {
            easy: [
              {
                word: "friend",
                syllables: "friend (1 syllable)",
                definition: "A person you like and know well",
                origin: "Old English 'freond', from Germanic root meaning 'to love'",
                sentence: "My best friend and I love to play together.",
                prefixSuffix: "Base word with no prefix or suffix",
                pronunciation: "FREND"
              },
              {
                word: "happy",
                syllables: "hap-py (2 syllables)",
                definition: "Feeling or showing pleasure and contentment",
                origin: "Middle English 'happy', from 'hap' meaning luck or fortune",
                sentence: "The children were happy to see the circus.",
                prefixSuffix: "Base word 'hap' + suffix '-py'",
                pronunciation: "HAP-ee"
              }
            ],
            medium: [
              {
                word: "necessary",
                syllables: "nec-es-sar-y (4 syllables)",
                definition: "Required to be done or achieved; essential",
                origin: "Latin 'necessarius', from 'necesse' meaning unavoidable",
                sentence: "It is necessary to study hard for the test.",
                prefixSuffix: "Base 'necess' + suffix '-ary'",
                pronunciation: "NES-uh-ser-ee"
              }
            ],
            hard: [
              {
                word: "onomatopoeia",
                syllables: "on-o-mat-o-poe-ia (6 syllables)",
                definition: "Words that imitate sounds (like 'buzz' or 'crash')",
                origin: "Greek 'onoma' (name) + 'poiein' (to make)",
                sentence: "The word 'splash' is an example of onomatopoeia.",
                prefixSuffix: "Greek compound: onoma- (name) + -poeia (making)",
                pronunciation: "on-uh-mat-uh-PEE-uh"
              }
            ]
          };

          // Game state
          const [gameState, setGameState] = useState('setup');
          const [teams, setTeams] = useState([]);
          const [currentTeamIndex, setCurrentTeamIndex] = useState(0);
          const [currentDifficulty, setCurrentDifficulty] = useState('easy');
          const [currentWord, setCurrentWord] = useState(null);
          const [round, setRound] = useState(1);
          const [usedWords, setUsedWords] = useState(new Set());
          const [customWordLists, setCustomWordLists] = useState({
            "August 27th - Today's Lesson": {
              "easy": [
                {
                  "word": "window",
                  "syllables": "win-dow (2 syllables)",
                  "definition": "An opening in a wall or roof fitted with glass to let in light or air",
                  "origin": "Old Norse 'vindauga' meaning 'wind eye'",
                  "sentence": "She opened the window to let in fresh air.",
                  "prefixSuffix": "Base word with no prefix or suffix",
                  "pronunciation": "WIN-doh"
                },
                {
                  "word": "because",
                  "syllables": "be-cause (2 syllables)",
                  "definition": "For the reason that; since",
                  "origin": "Middle English from 'bi cause' meaning 'by cause'",
                  "sentence": "He stayed home because it was raining.",
                  "prefixSuffix": "Prefix 'be-' + base word 'cause'",
                  "pronunciation": "bih-KAWZ"
                }
              ],
              "medium": [
                {
                  "word": "necessary",
                  "syllables": "nec-es-sar-y (4 syllables)",
                  "definition": "Required to be done or essential",
                  "origin": "Latin 'necessarius' meaning 'unavoidable'",
                  "sentence": "Water is necessary for life.",
                  "prefixSuffix": "Base word with no prefix or suffix",
                  "pronunciation": "NES-uh-ser-ee"
                }
              ],
              "hard": [
                {
                  "word": "onomatopoeia",
                  "syllables": "on-o-mat-o-poe-ia (6 syllables)",
                  "definition": "A word that imitates the sound it represents",
                  "origin": "Greek 'onoma' (name) + 'poiein' (to make)",
                  "sentence": "Words like 'buzz' and 'bang' are examples of onomatopoeia.",
                  "prefixSuffix": "Base word with no prefix or suffix",
                  "pronunciation": "on-uh-mat-uh-PEE-uh"
                }
              ]
            }
          });
          const [selectedWordList, setSelectedWordList] = useState("August 27th - Today's Lesson");
          const [gameMode, setGameMode] = useState('team');
          const [timeLeft, setTimeLeft] = useState(30);
          const [isTimerActive, setIsTimerActive] = useState(false);
          const [showWordCenter, setShowWordCenter] = useState(false);
          const [currentWordAttempts, setCurrentWordAttempts] = useState(0);
          const [difficultyProgression, setDifficultyProgression] = useState(['easy', 'medium', 'hard']);
          const [currentDifficultyIndex, setCurrentDifficultyIndex] = useState(0);
          const [incorrectWords, setIncorrectWords] = useState([]);
          const [teamPoints, setTeamPoints] = useState({});

          // Timer effect
          useEffect(() => {
            let interval = null;
            if (isTimerActive && timeLeft > 0) {
              interval = setInterval(() => {
                setTimeLeft(timeLeft - 1);
              }, 1000);
            } else if (timeLeft === 0) {
              setIsTimerActive(false);
              markIncorrect();
            }
            return () => clearInterval(interval);
          }, [isTimerActive, timeLeft]);

          // Initialize team points when teams change
          useEffect(() => {
            const newPoints = {};
            teams.forEach((team, index) => {
              newPoints[index] = teamPoints[index] || 1;
            });
            setTeamPoints(newPoints);
          }, [teams]);

          const getTeamColor = (index) => {
            const colors = ['bg-red-500', 'bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-pink-500', 'bg-teal-500', 'bg-yellow-500'];
            return colors[index % colors.length];
          };

          const addTeam = () => {
            const name = gameMode === 'individual' ? prompt("Enter student name:") : prompt("Enter team name:");
            if (name) {
              const lives = gameMode === 'individual' ? 5 : 10;
              setTeams([...teams, { name: name, lives: lives, wordsAttempted: 0, wordsCorrect: 0, color: getTeamColor(teams.length) }]);
            }
          };

          const removeTeam = (index) => {
            setTeams(teams.filter((_, i) => i !== index));
          };

          const selectRandomWord = (difficulty) => {
            const currentDatabase = selectedWordList === 'default' ? wordDatabase : customWordLists[selectedWordList];
            const availableWords = currentDatabase[difficulty]?.filter(word => 
              !usedWords.has(`${difficulty}-${word.word}`)
            ) || [];
            
            if (availableWords.length === 0) {
              setUsedWords(new Set());
              const allWords = currentDatabase[difficulty] || [];
              if (allWords.length === 0) {
                alert(`No words available for ${difficulty} difficulty in the selected word list!`);
                return null;
              }
              return allWords[Math.floor(Math.random() * allWords.length)];
            }
            
            const randomWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            setUsedWords(prev => new Set([...prev, `${difficulty}-${randomWord.word}`]));
            return randomWord;
          };

          const startNewWord = () => {
            const word = selectRandomWord(currentDifficulty);
            setCurrentWord(word);
            setTimeLeft(30);
            setIsTimerActive(true);
            setCurrentWordAttempts(0);
            setShowWordCenter(false);
          };

          const startGame = () => {
            const minRequired = gameMode === 'individual' ? 1 : 2;
            if (teams.length < minRequired) {
              const entityName = gameMode === 'individual' ? 'student' : 'teams';
              alert(`Please add at least ${minRequired === 1 ? 'one ' + entityName : 'two ' + entityName}!`);
              return;
            }
            
            setCurrentDifficulty('easy');
            setCurrentDifficultyIndex(0);
            setGameState('playing');
            startNewWord();
          };

          const markCorrect = () => {
            setIsTimerActive(false);
            const updatedTeams = [...teams];
            updatedTeams[currentTeamIndex].wordsAttempted++;
            updatedTeams[currentTeamIndex].wordsCorrect++;
            setTeams(updatedTeams);
            
            setTeamPoints(prev => ({
              ...prev,
              [currentTeamIndex]: (prev[currentTeamIndex] || 1) + 1
            }));
            
            playSuccessSound();
            nextTurn();
          };

          const markIncorrect = () => {
            setIsTimerActive(false);
            const updatedTeams = [...teams];
            updatedTeams[currentTeamIndex].lives--;
            updatedTeams[currentTeamIndex].wordsAttempted++;
            setTeams(updatedTeams);
            
            setIncorrectWords(prev => [...prev, currentWord]);
            playErrorSound();
            
            if (gameMode === 'team' && teams.length > 1 && currentWordAttempts === 0) {
              setCurrentWordAttempts(1);
              let nextIndex = (currentTeamIndex + 1) % teams.length;
              while (teams[nextIndex].lives <= 0) {
                nextIndex = (nextIndex + 1) % teams.length;
              }
              setCurrentTeamIndex(nextIndex);
              setTimeLeft(30);
              setIsTimerActive(true);
              return;
            }
            
            if (updatedTeams[currentTeamIndex].lives <= 0) {
              alert(`${updatedTeams[currentTeamIndex].name} is eliminated!`);
            }
            
            nextTurn();
          };

          const nextTurn = () => {
            const activeTeams = teams.filter(t => t.lives > 0);
            if (activeTeams.length <= 1 && gameMode === 'team') {
              setGameState('results');
              return;
            }
            if (activeTeams.length === 0 && gameMode === 'individual') {
              setGameState('results');
              return;
            }

            const totalWords = teams.reduce((sum, team) => sum + team.wordsAttempted, 0);
            if (totalWords > 0 && totalWords % (teams.length * 3) === 0) {
              const nextDiffIndex = currentDifficultyIndex + 1;
              if (nextDiffIndex < difficultyProgression.length) {
                setCurrentDifficultyIndex(nextDiffIndex);
                setCurrentDifficulty(difficultyProgression[nextDiffIndex]);
              }
            }

            let nextIndex = (currentTeamIndex + 1) % teams.length;
            while (teams[nextIndex].lives <= 0) {
              nextIndex = (nextIndex + 1) % teams.length;
            }
            
            setCurrentTeamIndex(nextIndex);
            startNewWord();
          };

          const playSuccessSound = () => {
            try {
              const audioContext = new (window.AudioContext || window.webkitAudioContext)();
              const oscillator = audioContext.createOscillator();
              const gainNode = audioContext.createGain();
              
              oscillator.connect(gainNode);
              gainNode.connect(audioContext.destination);
              
              oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
              gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
              gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
              
              oscillator.start(audioContext.currentTime);
              oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
              console.log('Audio not supported');
            }
          };

          const playErrorSound = () => {
            try {
              const audioContext = new (window.AudioContext || window.webkitAudioContext)();
              const oscillator = audioContext.createOscillator();
              const gainNode = audioContext.createGain();
              
              oscillator.connect(gainNode);
              gainNode.connect(audioContext.destination);
              
              oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
              gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
              gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
              
              oscillator.start(audioContext.currentTime);
              oscillator.stop(audioContext.currentTime + 0.2);
            } catch (e) {
              console.log('Audio not supported');
            }
          };

          const playAudio = (text) => {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.8;
            utterance.volume = 0.8;
            speechSynthesis.speak(utterance);
          };

          const resetGame = () => {
            setGameState('setup');
            setTeams([]);
            setCurrentTeamIndex(0);
            setCurrentDifficulty('easy');
            setCurrentWord(null);
            setRound(1);
            setUsedWords(new Set());
            setIncorrectWords([]);
            setTeamPoints({});
          };

          // Setup Screen
          if (gameState === 'setup') {
            return React.createElement('div', {className: "min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 p-8 text-white"}, 
              React.createElement('div', {className: "max-w-7xl mx-auto"}, 
                React.createElement('div', {className: "text-center mb-12"}, 
                  React.createElement('h1', {className: "text-6xl font-bold mb-4 text-yellow-300"}, "🏆 SPELLING BEE CHAMPIONSHIP"),
                  React.createElement('p', {className: "text-2xl"}, "Get ready to spell your way to victory!")
                ),

                React.createElement('div', {className: "bg-white/20 backdrop-blur rounded-xl p-6 mb-8"}, 
                  React.createElement('h2', {className: "text-2xl font-bold mb-4 text-center text-yellow-300"}, "Choose Game Mode"),
                  React.createElement('div', {className: "flex gap-4 justify-center"}, 
                    React.createElement('button', {
                      onClick: () => {
                        setGameMode('individual');
                        setTeams([]);
                      },
                      className: `px-8 py-4 rounded-xl text-xl font-semibold transition-colors ${
                        gameMode === 'individual'
                          ? 'bg-yellow-300 text-black'
                          : 'bg-white/10 hover:bg-white/20 text-white'
                      }`
                    }, 
                      "👤 Individual Students",
                      React.createElement('br'),
                      React.createElement('span', {className: "text-sm opacity-80"}, "5 lives each (Lesson Plan Mode)")
                    ),
                    React.createElement('button', {
                      onClick: () => {
                        setGameMode('team');
                        setTeams([]);
                      },
                      className: `px-8 py-4 rounded-xl text-xl font-semibold transition-colors ${
                        gameMode === 'team'
                          ? 'bg-yellow-300 text-black'
                          : 'bg-white/10 hover:bg-white/20 text-white'
                      }`
                    }, 
                      "👥 Team Competition",
                      React.createElement('br'),
                      React.createElement('span', {className: "text-sm opacity-80"}, "10 lives per team")
                    )
                  )
                ),

                React.createElement('div', {className: "grid lg:grid-cols-2 gap-8"}, 
                  React.createElement('div', {className: "bg-white/20 backdrop-blur rounded-xl p-8"}, 
                    React.createElement('h2', {className: "text-3xl font-bold mb-6 flex items-center gap-3"}, 
                      React.createElement(Users, {className: "text-yellow-300"}),
                      `${gameMode === 'individual' ? 'Students' : 'Teams'} (${teams.length})`
                    ),
                    
                    React.createElement('div', {className: "space-y-4 mb-6"}, 
                      teams.map((entity, index) => 
                        React.createElement('div', {key: index, className: `${entity.color} rounded-lg p-4 flex justify-between items-center text-white`}, 
                          React.createElement('div', {}, 
                            React.createElement('span', {className: "text-xl font-semibold"}, entity.name),
                            React.createElement('div', {className: "text-sm opacity-90"}, `Lives: ${entity.lives}`)
                          ),
                          React.createElement('button', {
                            onClick: () => removeTeam(index),
                            className: "bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors"
                          }, "Remove")
                        )
                      )
                    ),
                    
                    React.createElement('button', {
                      onClick: addTeam,
                      className: "w-full bg-green-500 hover:bg-green-600 text-white px-6 py-4 rounded-xl text-xl font-semibold transition-colors"
                    }, `+ Add ${gameMode === 'individual' ? 'Student' : 'Team'}`)
                  ),
                  
                  React.createElement('div', {className: "bg-white/20 backdrop-blur rounded-xl p-8"}, 
                    React.createElement('h2', {className: "text-3xl font-bold mb-6 flex items-center gap-3"}, 
                      React.createElement(BookOpen, {className: "text-yellow-300"}),
                      "Game Settings"
                    ),
                    
                    React.createElement('button', {
                      onClick: startGame,
                      disabled: (gameMode === 'individual' ? teams.length < 1 : teams.length < 2),
                      className: `w-full px-6 py-4 rounded-xl text-2xl font-bold transition-colors flex items-center justify-center gap-3 ${
                        (gameMode === 'individual' ? teams.length >= 1 : teams.length >= 2)
                          ? 'bg-yellow-300 hover:bg-yellow-400 text-black'
                          : 'bg-gray-500 text-gray-300 cursor-not-allowed'
                      }`
                    }, 
                      React.createElement(Play),
                      "START SPELLING BEE"
                    )
                  )
                )
              )
            );
          }

          // Game Playing Screen
          if (gameState === 'playing') {
            const currentTeam = teams[currentTeamIndex];
            
            return React.createElement('div', {className: "min-h-screen bg-gradient-to-br from-indigo-600 to-purple-800 p-8 text-white"}, 
              React.createElement('div', {className: "max-w-6xl mx-auto"}, 
                React.createElement('div', {className: "text-center mb-8"}, 
                  React.createElement('h1', {className: "text-4xl font-bold text-yellow-300 mb-2"}, `SPELLING BEE - ${currentDifficulty.toUpperCase()}`),
                  React.createElement('div', {className: "text-xl"}, `Round ${round} | Active ${gameMode === 'individual' ? 'Students' : 'Teams'}: ${teams.filter(t => t.lives > 0).length}`)
                ),

                React.createElement('div', {className: "text-center mb-6"}, 
                  React.createElement('div', {className: `text-6xl font-bold ${timeLeft <= 10 ? 'text-red-400 animate-pulse' : 'text-white'}`}, 
                    `⏰ ${timeLeft}s`
                  )
                ),

                showWordCenter && React.createElement('div', {className: "text-center mb-8 bg-yellow-300 text-black p-8 rounded-xl"}, 
                  React.createElement('h2', {className: "text-8xl font-bold"}, currentWord?.word.toUpperCase())
                ),

                React.createElement('div', {className: `${currentTeam.color} backdrop-blur rounded-xl p-8 mb-8 text-center text-white shadow-2xl border-4 border-yellow-300`}, 
                  React.createElement('h2', {className: "text-5xl font-bold mb-4"}, `${currentTeam.name}'s Turn`),
                  React.createElement('div', {className: "flex justify-center items-center gap-8 text-2xl"}, 
                    React.createElement('div', {}, `Lives: ${'❤️'.repeat(Math.min(currentTeam.lives, 10))}${currentTeam.lives > 10 ? `+${currentTeam.lives - 10}` : ''}`),
                    React.createElement('div', {}, `Score: ${currentTeam.wordsCorrect}/${currentTeam.wordsAttempted}`),
                    React.createElement('div', {}, `Points: 💰 ${teamPoints[currentTeamIndex] || 1}`)
                  )
                ),

                React.createElement('div', {className: "bg-white/20 backdrop-blur rounded-xl p-6 mb-6"}, 
                  React.createElement('h3', {className: "text-2xl font-bold mb-4 text-yellow-300"}, "Teacher Controls"),
                  React.createElement('div', {className: "grid grid-cols-2 md:grid-cols-4 gap-4"}, 
                    React.createElement('button', {
                      onClick: () => playAudio(`The word is ${currentWord?.word}`),
                      className: "bg-blue-500 hover:bg-blue-600 px-4 py-3 rounded-xl flex items-center gap-2 text-sm font-semibold"
                    }, 
                      React.createElement(Volume2),
                      "Say Word"
                    ),
                    React.createElement('button', {
                      onClick: () => setShowWordCenter(!showWordCenter),
                      className: "bg-yellow-500 hover:bg-yellow-600 px-4 py-3 rounded-xl text-sm font-semibold text-black"
                    }, showWordCenter ? '👁️ Hide Word' : '👁️ Show Word'),
                    React.createElement('button', {
                      onClick: () => setIsTimerActive(!isTimerActive),
                      className: "bg-orange-500 hover:bg-orange-600 px-4 py-3 rounded-xl text-sm font-semibold"
                    }, isTimerActive ? '⏸️ Pause' : '▶️ Resume')
                  ),
                  React.createElement('div', {className: "grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"}, 
                    React.createElement('button', {
                      onClick: markCorrect,
                      className: "bg-green-500 hover:bg-green-600 px-6 py-3 rounded-xl text-lg font-semibold"
                    }, "✓ Correct"),
                    React.createElement('button', {
                      onClick: markIncorrect,
                      className: "bg-red-500 hover:bg-red-600 px-6 py-3 rounded-xl text-lg font-semibold"
                    }, "✗ Incorrect"),
                    React.createElement('button', {
                      onClick: startNewWord,
                      className: "bg-gray-500 hover:bg-gray-600 px-6 py-3 rounded-xl flex items-center gap-2 text-lg font-semibold"
                    }, 
                      React.createElement(RotateCcw),
                      "New Word"
                    )
                  )
                )
              )
            );
          }

          // Results Screen
          if (gameState === 'results') {
            const sortedTeams = [...teams].sort((a, b) => {
              if (b.lives !== a.lives) return b.lives - a.lives;
              return b.wordsCorrect - a.wordsCorrect;
            });

            return React.createElement('div', {className: "min-h-screen bg-gradient-to-br from-green-600 to-blue-700 p-8 text-white"}, 
              React.createElement('div', {className: "max-w-4xl mx-auto text-center"}, 
                React.createElement('h1', {className: "text-6xl font-bold mb-8 text-yellow-300"}, "🏆 FINAL RESULTS"),
                React.createElement('button', {
                  onClick: resetGame,
                  className: "bg-yellow-300 hover:bg-yellow-400 text-black px-8 py-4 rounded-xl text-2xl font-bold transition-colors"
                }, "Play Again")
              )
            );
          }
        };

        ReactDOM.render(React.createElement(SpellingBeeGame), document.getElementById('root'));
    </script>
</body>
</html>
